<!doctype html>
<html>
<head>
    <title>Kanon</title>

    <script type="text/javascript" src="external/vis/dist/vis.js"></script>
    <link href="external/vis/dist/vis.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" type="text/css" href="src/css/style.css">

</head>
<body>

<script type="text/javascript" src="external/ace-builds/src/ace.js"></script>
<script type="text/javascript" src="external/esprima.js"></script>
<script type="text/javascript" src="external/escodegen/escodegen.browser.js"></script>
<script type="text/javascript" src="src/js/toVisjs.js"></script>
<script type="text/javascript" src="src/js/traverse.js"></script>
<script type="text/javascript" src="src/js/store-positions.js"></script>
<script type="text/javascript" src="src/js/code-conversion.js"></script>
<script type="text/javascript" src="src/js/update.js"></script>
<script type="text/javascript" src="src/js/context.js"></script>
<script type="text/javascript" src="src/js/trace.js"></script>
<script type="text/javascript" src="src/live-editor-js/ast-walker.js"></script>
<script type="text/javascript" src="src/live-editor-js/ast-builder.js"></script>
<script type="text/javascript" src="src/live-editor-js/ast-transforms.js"></script>

<div id="editor">
<script>
    window.editor = ace.edit("editor");
    editor.setValue(window.localStorage["code"] || "");

    editor.getSession().setMode('ace/mode/javascript');
    editor.on('change', Update.positionUpdate);
    editor.getSelection().on('changeCursor', Update.contextUpdate);
</script>
</div>

<div id="mynetwork">
</div>
<div id='button'>
    <input type="button" value="No Context" onclick="Context.ChangeContext(false); Update.contextUpdate();">
    <input type="button" value="Use Context" onclick="Context.ChangeContext(true); Update.contextUpdate();">
</div>
<div id='context'>
</div>
<div id='console'>
</div>
<script type="text/javascript">
    var container = document.getElementById('mynetwork');
    var data = {nodes: new vis.DataSet({}), edges: new vis.DataSet({})};
    var options = {
        autoResize: false,
        nodes: {color: 'skyblue'},
        edges: {arrows: 'to', color: 'skyblue'},
        interaction: {zoomView: false},
    };
    window.network = new vis.Network(container, data, options);
    StorePositions.oldNetworkNodesData = network.body.data.nodes._data;
    StorePositions.oldNetworkEdgesData = network.body.data.edges._data;

    Update.positionUpdate();
    editor.getSelection().clearSelection();

    document.getElementById('context').textContent = (Context.UseContext) ? 'Use Context' : 'No Context';
</script>
</body>
</html>



